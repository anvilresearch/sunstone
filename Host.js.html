<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Host.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Host.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'

/**
 * Dependencies
 * @ignore
 */
const injector = require('./injectorInstance')
const Registry = require('./Registry')

/**
 * Host
 *
 * @class
 * This is the main class of the program. The constructor initializes an
 * injector and registry for the application. The bootstrap method uses the
 * registry to find, load, validate and initialize plugins. The run method
 * starts the application.
 *
 * **Examples**
 *
 * *Host Application*
 *
 * ```js
 * module.exports = require('sunstone').bootstrap({
 *   directories: [
 *     path.join(__dirname, 'plugins'),
 *     path.join(process.cwd(), 'plugins')
 *   ]
 * })
 * ```
 *
 * *Extending Application*
 *
 * ```js
 * require('my-app').run()
 * ```
 *
 * This class requires the modules {@link Registry}.
 *
 * @todo decide how to handle directory/node_modules configuration
 * @todo needs to handle customized plugin directories
 */
class Host {

  /**
   * Constructor
   * @description
   * Initialize a Host.
   *
   * @param {Object} options - Options object
   * @requires Registry
   */
  constructor (options) {
    let registry = new Registry(options)

    this.options = options
    this.registry = registry
  }

  /**
   * Bootstrap
   *
   * @description
   * Create a new Host instance with the provided options and initialize the
   * application.
   *
   * @param {Object} options - Options object
   * @returns {Host}
   */
  static bootstrap (options) {
    let host = new Host(options)

    host.registry
      .glob()
      .require()
      .resolve()
      .prioritize()
      .initialize()

    return host
  }

  /**
   * Run
   *
   * @description
   * Run starts the application by injecting the main dependency, then iterating
   * through all the plugins and starting each of them.
   */
  run () {
    injector.get('main')
    this.registry
      // @todo .filter({ enabled: true })
      .filter()
      .start()
  }

}

/**
 * Exports
 */
module.exports = Host
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Collection.html">Collection</a></li><li><a href="Dependency.html">Dependency</a></li><li><a href="DependencyCollection.html">DependencyCollection</a></li><li><a href="Host.html">Host</a></li><li><a href="Injector.html">Injector</a></li><li><a href="Plugin.html">Plugin</a></li><li><a href="PluginCollection.html">PluginCollection</a></li><li><a href="Registry.html">Registry</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Feb 11 2016 21:59:26 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
